/**
 * Copyright 2016 Yahoo Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */'use strict';var cov_uqxj81kxl=function(){var path='/Users/gurleenk/athenz_repo_new/athenz/ui/src/utils/page.js',hash='ba0c8a210bbf1c22f4ebb6418e75ba682a61e85a',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/gurleenk/athenz_repo_new/athenz/ui/src/utils/page.js',statementMap:{'0':{start:{line:18,column:10},end:{line:18,column:24}},'1':{start:{line:19,column:8},end:{line:19,column:25}},'2':{start:{line:21,column:20},end:{line:24,column:42}},'3':{start:{line:26,column:15},end:{line:36,column:1}},'4':{start:{line:38,column:0},end:{line:162,column:2}},'5':{start:{line:40,column:18},end:{line:40,column:20}},'6':{start:{line:41,column:4},end:{line:44,column:5}},'7':{start:{line:42,column:6},end:{line:42,column:31}},'8':{start:{line:43,column:6},end:{line:43,column:35}},'9':{start:{line:46,column:4},end:{line:58,column:5}},'10':{start:{line:47,column:6},end:{line:47,column:29}},'11':{start:{line:48,column:6},end:{line:48,column:33}},'12':{start:{line:49,column:6},end:{line:49,column:28}},'13':{start:{line:50,column:11},end:{line:58,column:5}},'14':{start:{line:51,column:6},end:{line:51,column:32}},'15':{start:{line:52,column:6},end:{line:52,column:36}},'16':{start:{line:53,column:6},end:{line:53,column:31}},'17':{start:{line:54,column:11},end:{line:58,column:5}},'18':{start:{line:55,column:6},end:{line:55,column:31}},'19':{start:{line:56,column:6},end:{line:56,column:35}},'20':{start:{line:57,column:6},end:{line:57,column:30}},'21':{start:{line:60,column:4},end:{line:60,column:19}},'22':{start:{line:64,column:4},end:{line:79,column:5}},'23':{start:{line:65,column:6},end:{line:78,column:8}},'24':{start:{line:81,column:27},end:{line:81,column:90}},'25':{start:{line:82,column:4},end:{line:84,column:5}},'26':{start:{line:83,column:6},end:{line:83,column:41}},'27':{start:{line:86,column:4},end:{line:86,column:20}},'28':{start:{line:89,column:4},end:{line:89,column:63}},'29':{start:{line:90,column:4},end:{line:90,column:64}},'30':{start:{line:91,column:4},end:{line:91,column:51}},'31':{start:{line:92,column:4},end:{line:92,column:82}},'32':{start:{line:93,column:4},end:{line:93,column:52}},'33':{start:{line:94,column:4},end:{line:94,column:87}},'34':{start:{line:95,column:4},end:{line:95,column:44}},'35':{start:{line:97,column:4},end:{line:101,column:7}},'36':{start:{line:103,column:4},end:{line:103,column:87}},'37':{start:{line:105,column:4},end:{line:105,column:40}},'38':{start:{line:111,column:17},end:{line:111,column:52}},'39':{start:{line:113,column:4},end:{line:126,column:5}},'40':{start:{line:114,column:6},end:{line:114,column:54}},'41':{start:{line:115,column:6},end:{line:115,column:49}},'42':{start:{line:116,column:11},end:{line:126,column:5}},'43':{start:{line:117,column:6},end:{line:117,column:55}},'44':{start:{line:118,column:6},end:{line:118,column:51}},'45':{start:{line:120,column:6},end:{line:125,column:9}},'46':{start:{line:121,column:8},end:{line:124,column:9}},'47':{start:{line:122,column:10},end:{line:122,column:87}},'48':{start:{line:123,column:10},end:{line:123,column:90}},'49':{start:{line:129,column:17},end:{line:129,column:44}},'50':{start:{line:131,column:4},end:{line:131,column:25}},'51':{start:{line:132,column:4},end:{line:134,column:7}},'52':{start:{line:133,column:6},end:{line:133,column:33}},'53':{start:{line:136,column:4},end:{line:136,column:30}},'54':{start:{line:139,column:4},end:{line:139,column:60}},'55':{start:{line:142,column:22},end:{line:155,column:5}},'56':{start:{line:157,column:23},end:{line:157,column:84}},'57':{start:{line:158,column:4},end:{line:158,column:48}},'58':{start:{line:160,column:4},end:{line:160,column:23}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:39,column:21},end:{line:39,column:22}},loc:{start:{line:39,column:38},end:{line:61,column:3}},line:39},'1':{name:'(anonymous_1)',decl:{start:{line:62,column:18},end:{line:62,column:19}},loc:{start:{line:62,column:44},end:{line:87,column:3}},line:62},'2':{name:'(anonymous_2)',decl:{start:{line:88,column:18},end:{line:88,column:19}},loc:{start:{line:88,column:37},end:{line:106,column:3}},line:88},'3':{name:'(anonymous_3)',decl:{start:{line:110,column:24},end:{line:110,column:25}},loc:{start:{line:110,column:43},end:{line:127,column:3}},line:110},'4':{name:'(anonymous_4)',decl:{start:{line:120,column:37},end:{line:120,column:38}},loc:{start:{line:120,column:53},end:{line:125,column:7}},line:120},'5':{name:'(anonymous_5)',decl:{start:{line:128,column:22},end:{line:128,column:23}},loc:{start:{line:128,column:43},end:{line:137,column:3}},line:128},'6':{name:'(anonymous_6)',decl:{start:{line:132,column:26},end:{line:132,column:27}},loc:{start:{line:132,column:42},end:{line:134,column:5}},line:132},'7':{name:'(anonymous_7)',decl:{start:{line:138,column:18},end:{line:138,column:19}},loc:{start:{line:138,column:48},end:{line:140,column:3}},line:138},'8':{name:'(anonymous_8)',decl:{start:{line:141,column:18},end:{line:141,column:19}},loc:{start:{line:141,column:35},end:{line:161,column:3}},line:141}},branchMap:{'0':{loc:{start:{line:41,column:4},end:{line:44,column:5}},type:'if',locations:[{start:{line:41,column:4},end:{line:44,column:5}},{start:{line:41,column:4},end:{line:44,column:5}}],line:41},'1':{loc:{start:{line:46,column:4},end:{line:58,column:5}},type:'if',locations:[{start:{line:46,column:4},end:{line:58,column:5}},{start:{line:46,column:4},end:{line:58,column:5}}],line:46},'2':{loc:{start:{line:50,column:11},end:{line:58,column:5}},type:'if',locations:[{start:{line:50,column:11},end:{line:58,column:5}},{start:{line:50,column:11},end:{line:58,column:5}}],line:50},'3':{loc:{start:{line:54,column:11},end:{line:58,column:5}},type:'if',locations:[{start:{line:54,column:11},end:{line:58,column:5}},{start:{line:54,column:11},end:{line:58,column:5}}],line:54},'4':{loc:{start:{line:64,column:4},end:{line:79,column:5}},type:'if',locations:[{start:{line:64,column:4},end:{line:79,column:5}},{start:{line:64,column:4},end:{line:79,column:5}}],line:64},'5':{loc:{start:{line:81,column:27},end:{line:81,column:90}},type:'cond-expr',locations:[{start:{line:81,column:38},end:{line:81,column:83}},{start:{line:81,column:86},end:{line:81,column:90}}],line:81},'6':{loc:{start:{line:81,column:47},end:{line:81,column:82}},type:'binary-expr',locations:[{start:{line:81,column:47},end:{line:81,column:64}},{start:{line:81,column:68},end:{line:81,column:82}}],line:81},'7':{loc:{start:{line:82,column:4},end:{line:84,column:5}},type:'if',locations:[{start:{line:82,column:4},end:{line:84,column:5}},{start:{line:82,column:4},end:{line:84,column:5}}],line:82},'8':{loc:{start:{line:90,column:33},end:{line:90,column:63}},type:'cond-expr',locations:[{start:{line:90,column:44},end:{line:90,column:58}},{start:{line:90,column:61},end:{line:90,column:63}}],line:90},'9':{loc:{start:{line:92,column:25},end:{line:92,column:81}},type:'binary-expr',locations:[{start:{line:92,column:25},end:{line:92,column:43}},{start:{line:92,column:47},end:{line:92,column:81}}],line:92},'10':{loc:{start:{line:113,column:4},end:{line:126,column:5}},type:'if',locations:[{start:{line:113,column:4},end:{line:126,column:5}},{start:{line:113,column:4},end:{line:126,column:5}}],line:113},'11':{loc:{start:{line:116,column:11},end:{line:126,column:5}},type:'if',locations:[{start:{line:116,column:11},end:{line:126,column:5}},{start:{line:116,column:11},end:{line:126,column:5}}],line:116},'12':{loc:{start:{line:121,column:8},end:{line:124,column:9}},type:'if',locations:[{start:{line:121,column:8},end:{line:124,column:9}},{start:{line:121,column:8},end:{line:124,column:9}}],line:121},'13':{loc:{start:{line:123,column:45},end:{line:123,column:89}},type:'cond-expr',locations:[{start:{line:123,column:77},end:{line:123,column:84}},{start:{line:123,column:87},end:{line:123,column:89}}],line:123},'14':{loc:{start:{line:139,column:11},end:{line:139,column:59}},type:'binary-expr',locations:[{start:{line:139,column:11},end:{line:139,column:21}},{start:{line:139,column:25},end:{line:139,column:59}}],line:139},'15':{loc:{start:{line:157,column:23},end:{line:157,column:84}},type:'cond-expr',locations:[{start:{line:157,column:56},end:{line:157,column:73}},{start:{line:157,column:76},end:{line:157,column:84}}],line:157}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0],'13':[0,0],'14':[0,0],'15':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var url=(cov_uqxj81kxl.s[0]++,require('url'));var _=(cov_uqxj81kxl.s[1]++,require('lodash'));var cleanupFields=(cov_uqxj81kxl.s[2]++,['addError','addWgError','addPolicyError','requestId','missing','failed','success','search','createdRole','createdResource','createdPolicy','createdTransport','addWg','reviewWlError','workloadDelete','editWlError','deleteError','changeOwnershipError']);var MESSAGES=(cov_uqxj81kxl.s[3]++,{changeOwnershipError:'Failed to update domain ownership detail. Please contact support.',createdPolicy:'New Policy Created',reviewWlError:'Failed to update Workload status, Please try again',editWlError:'Failed to edit Workload, Please try again',workloadDelete:'Workload deleted from Workload Group',addWg:'Workload Group added to ${ entity }',createdRole:'New ${ entity } created. You can now start adding Workload Groups and Policies to it',createdResource:'New ${ entity } created. You can now start adding Workload Groups and Transports to it',createdTransport:'New Transport added to ${ entity }'});cov_uqxj81kxl.s[4]++;module.exports={getCurrentSection:function(params){cov_uqxj81kxl.f[0]++;var section=(cov_uqxj81kxl.s[5]++,{});cov_uqxj81kxl.s[6]++;if(params.domainId){cov_uqxj81kxl.b[0][0]++;cov_uqxj81kxl.s[7]++;section.title='Domain';cov_uqxj81kxl.s[8]++;section.id=params.domainId;}else{cov_uqxj81kxl.b[0][1]++;}cov_uqxj81kxl.s[9]++;if(params.roleId){cov_uqxj81kxl.b[1][0]++;cov_uqxj81kxl.s[10]++;section.title='Role';cov_uqxj81kxl.s[11]++;section.id=params.roleId;cov_uqxj81kxl.s[12]++;section.type='role';}else{cov_uqxj81kxl.b[1][1]++;cov_uqxj81kxl.s[13]++;if(params.serviceId){cov_uqxj81kxl.b[2][0]++;cov_uqxj81kxl.s[14]++;section.title='Service';cov_uqxj81kxl.s[15]++;section.id=params.serviceId;cov_uqxj81kxl.s[16]++;section.type='service';}else{cov_uqxj81kxl.b[2][1]++;cov_uqxj81kxl.s[17]++;if(params.policyId){cov_uqxj81kxl.b[3][0]++;cov_uqxj81kxl.s[18]++;section.title='Policy';cov_uqxj81kxl.s[19]++;section.id=params.policyId;cov_uqxj81kxl.s[20]++;section.type='policy';}else{cov_uqxj81kxl.b[3][1]++;}}}cov_uqxj81kxl.s[21]++;return section;},getSubSections:function(section,params){cov_uqxj81kxl.f[1]++;var sections;cov_uqxj81kxl.s[22]++;if(section==='Domain'){cov_uqxj81kxl.b[4][0]++;cov_uqxj81kxl.s[23]++;sections={role:{link:'/athenz/domain/'+params.domainId+'/role',name:'Roles'},service:{link:'/athenz/domain/'+params.domainId+'/service',name:'Services'},policy:{link:'/athenz/domain/'+params.domainId+'/policy',name:'Policies'}};}else{cov_uqxj81kxl.b[4][1]++;}var activeSubSection=(cov_uqxj81kxl.s[24]++,sections?(cov_uqxj81kxl.b[5][0]++,sections[(cov_uqxj81kxl.b[6][0]++,params.subSection)||(cov_uqxj81kxl.b[6][1]++,params.section)]):(cov_uqxj81kxl.b[5][1]++,null));cov_uqxj81kxl.s[25]++;if(activeSubSection){cov_uqxj81kxl.b[7][0]++;cov_uqxj81kxl.s[26]++;activeSubSection.active='active';}else{cov_uqxj81kxl.b[7][1]++;}cov_uqxj81kxl.s[27]++;return sections;},initCommonData:function(req,res){cov_uqxj81kxl.f[2]++;cov_uqxj81kxl.s[28]++;res.locals.allParams=_.assign({},req.params,req.query);cov_uqxj81kxl.s[29]++;res.locals.allParams.token=req.body?(cov_uqxj81kxl.b[8][0]++,req.body.token):(cov_uqxj81kxl.b[8][1]++,'');cov_uqxj81kxl.s[30]++;res.locals.currentDomain=req.params.domainId;cov_uqxj81kxl.s[31]++;res.locals.section=(cov_uqxj81kxl.b[9][0]++,res.locals.section)||(cov_uqxj81kxl.b[9][1]++,this.getCurrentSection(req.params));cov_uqxj81kxl.s[32]++;res.locals.entityType=res.locals.section.type;cov_uqxj81kxl.s[33]++;res.locals.subSections=this.getSubSections(res.locals.section.title,req.params);cov_uqxj81kxl.s[34]++;res.locals.appEnv=req.config.envLabel;cov_uqxj81kxl.s[35]++;res.locals.navApps=[{link:'/athenz',name:'Athenz',active:'active'}];cov_uqxj81kxl.s[36]++;res.locals.productionsvc=req.config.serviceFQN==='athenz.console.uiproduction';cov_uqxj81kxl.s[37]++;this.setAppContextMessage(req,res);},/**
   * This adds content to appheader partial.
   */setAppContextMessage:function(req,res){cov_uqxj81kxl.f[3]++;var entity=(cov_uqxj81kxl.s[38]++,_.capitalize(res.locals.entityType));cov_uqxj81kxl.s[39]++;if(req.query.failed){cov_uqxj81kxl.b[10][0]++;cov_uqxj81kxl.s[40]++;res.locals.appContextMessage=req.query.failed;cov_uqxj81kxl.s[41]++;res.locals.appContextMessageType='error';}else{cov_uqxj81kxl.b[10][1]++;cov_uqxj81kxl.s[42]++;if(req.query.success){cov_uqxj81kxl.b[11][0]++;cov_uqxj81kxl.s[43]++;res.locals.appContextMessage=req.query.success;cov_uqxj81kxl.s[44]++;res.locals.appContextMessageType='success';}else{cov_uqxj81kxl.b[11][1]++;cov_uqxj81kxl.s[45]++;Object.keys(req.query).forEach(function(param){cov_uqxj81kxl.f[4]++;cov_uqxj81kxl.s[46]++;if(MESSAGES[param]){cov_uqxj81kxl.b[12][0]++;cov_uqxj81kxl.s[47]++;res.locals.appContextMessage=_.template(MESSAGES[param])({entity:entity});cov_uqxj81kxl.s[48]++;res.locals.appContextMessageType=param.indexOf('Error')!==-1?(cov_uqxj81kxl.b[13][0]++,'error'):(cov_uqxj81kxl.b[13][1]++,'');}else{cov_uqxj81kxl.b[12][1]++;}});}}},cleanupOriginalUrl:function(currentUrl){cov_uqxj81kxl.f[5]++;var urlObj=(cov_uqxj81kxl.s[49]++,url.parse(currentUrl,true));cov_uqxj81kxl.s[50]++;delete urlObj.search;cov_uqxj81kxl.s[51]++;cleanupFields.forEach(function(field){cov_uqxj81kxl.f[6]++;cov_uqxj81kxl.s[52]++;delete urlObj.query[field];});cov_uqxj81kxl.s[53]++;return url.format(urlObj);},isUriSectionOf:function(uriSection,section){cov_uqxj81kxl.f[7]++;cov_uqxj81kxl.s[54]++;return(cov_uqxj81kxl.b[14][0]++,uriSection)&&(cov_uqxj81kxl.b[14][1]++,uriSection.indexOf(section)!==-1);},getDomainTypes:function(params){cov_uqxj81kxl.f[8]++;var domainTypes=(cov_uqxj81kxl.s[55]++,{domain:{link:'/athenz/domain/create/domain',name:'Top Level'},subdomain:{link:'/athenz/domain/create/subdomain',name:'Sub domain'},userdomain:{link:'/athenz/domain/create/userdomain',name:'Personal'}});var activeDomain=(cov_uqxj81kxl.s[56]++,domainTypes[params.domainType]?(cov_uqxj81kxl.b[15][0]++,params.domainType):(cov_uqxj81kxl.b[15][1]++,'domain'));cov_uqxj81kxl.s[57]++;domainTypes[activeDomain].active='active';cov_uqxj81kxl.s[58]++;return domainTypes;}};